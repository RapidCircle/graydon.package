<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introduction</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<ul>
<li><a href="#introduction">Introduction</a>

<ul>
<li><a href="#example_data">Example data</a></li>
</ul></li>
<li><a href="#create_hierachy_graph">Creating a company hierarchy graph</a></li>
<li><a href="#selecting">Selecting company hierarchies graphs</a>

<ul>
<li><a href="#selecting_single">Selecting a hierarchy by company ID</a></li>
<li><a href="#selecting_multiple">Selecting hierarchies with a column of company IDs</a></li>
<li><a href="#selecting_all">Listing all hierarchy graphs</a></li>
</ul></li>
<li><a href="#selecting">Converting company hierarchy graphs to data-frames</a>

<ul>
<li><a href="#selecting_single">Converting a single hierarchy graph</a></li>
<li><a href="#selecting_multiple">Converting a list of hierarchy graphs</a></li>
</ul></li>
<li><a href="#calculate">Calculating properties</a>

<ul>
<li><a href="#propagate_values">Propagating values</a></li>
<li><a href="#adding_stats">Adding graph statistics</a></li>
<li><a href="#marking">Marking companies</a></li>
<li><a href="#sister_companies">Sister companies</a></li>
<li><a href="#recode_holdings">Recoding holdings</a></li>
</ul></li>
</ul>

<h1>Introduction</h1>

<p>In our database we can find the relations between companies by a parent child relation, but there is a lot of information that can be gained from the total total tree of company relations. This package contains several functions that is useful for extracting this kind of information, and for plotting the total company hierarchy.</p>

<h3><a name="example_data"></a>The example data</h3>

<p>First let&#39;s load the package:</p>

<pre><code class="r">library(graydon.package)
</code></pre>

<p>The package contains a data frame, <em>tbl_company_relations</em> which is an ex(s)ample of how company relations are typically represented in our database (<em>id_company</em>, <em>id_company_parent</em>), with some extra added data about each of the companies. The data frame contains the following columns:</p>

<table><thead>
<tr>
<th align="left">Column.names</th>
</tr>
</thead><tbody>
<tr>
<td align="left">id_company</td>
</tr>
<tr>
<td align="left">id_company_parent</td>
</tr>
<tr>
<td align="left">code_sbi</td>
</tr>
<tr>
<td align="left">size_company</td>
</tr>
<tr>
<td align="left">qty_employees</td>
</tr>
</tbody></table>

<h1><a name="create_hierachy_graph"></a>Creating a company hierarchy graph</h1>

<p>Company relations in our database are represented in parent-child relations, but this doesn&#39;t give you the complete overview of how companies fit together in their complete hierarchy.  <a href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics">Graphs</a> provide a way of getting those overviews. Let&#39;s load the <a href="http://igraph.org/r/doc/"><em>igraph</em></a> library first:</p>

<pre><code class="r">library(igraph)
</code></pre>

<p>With a simple function call we can create a graph, based on those parent-child relationships expressed in a table. Make sure the child and the parent ID columns are the first and second column in the table respectively.</p>

<pre><code class="r">graph_company_hierarchies &lt;- create_graph_company_hierarchies(tbl_company_relations)
</code></pre>

<p>The resulting graph represents a network of all individual company hierarchies in one big &#39;space&#39; which can be graphically represented like below. You can see this plot is pretty useless in in itself, but this &#39;space&#39; of hierarchies can be used as a &#39;database&#39; to easily retrieve the desired company hierarchies which are usefull for plotting and doing calculations within those.</p>

<p>The <em>plot_graydon_graph</em> function is used to plot graphs using graydon colors, the extra parameters <em>vertex.label</em>, <em>vertex.size</em> and <em>edge.arrow.size</em> are set so they override the defaults.</p>

<pre><code class="r">plot_graydon_graph(graph_company_hierarchies,
                   vertex.label = &quot;&quot;,
                   vertex.size = 4,
                   edge.arrow.size = 0)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-5"/></p>

<h1><a name="selecting"></a>Selecting company hierarchies graphs</h1>

<p>There are a few ways which we can select the distinct company hierarchies so we can make useful calculations or plots about them: you can either select them individually or by bulk.</p>

<h2><a name="selecting_single"></a>Selecting a hierarchy by company ID</h2>

<p>If you have a single company that you want to find out about more you can select it using the function <em>find_company_hierarchy</em>:</p>

<pre><code class="r">id_company_selected &lt;- &quot;931238099&quot;
graph_company_hierarchy &lt;- find_company_hierarchy(graph_company_hierarchies, id_company_selected)
</code></pre>

<p>The resulting graph has the logical attribute <em>is_searched_company</em> set to <em>TRUE</em> of the searched for company. Let&#39;s plot this graph, highlighting the searched for companies:</p>

<pre><code class="r">igraph::V(graph_company_hierarchy)$color &lt;- ifelse(igraph::V(graph_company_hierarchy)$is_searched_company,
                                                   col_graydon[2],
                                                   col_graydon[4])
plot_graydon_graph(graph_company_hierarchy)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-7"/></p>

<h2><a name="selecting_multiple"></a>Selecting hierarchies with a column of company IDs</h2>

<p>A customer&#39;s file contains multiple companies of which we might want to calculate, or show (parts) of their hierarchy. The <em>list_selected_hierarchies</em> function can be used to put the graphs of all these companies in a list. In this example we have a data frame <em>tbl_customers</em> with the column <em>id_company</em>, of which we want to retrieve all the graphs. </p>

<pre><code class="r">list_selected_hierarchies &lt;- select_graph_hierarchies(graph_company_hierarchies, 
                                                      tbl_customers$id_company)
</code></pre>

<p>Note that the <em>tbl_customers</em> data-frame contains 300, while the <em>list_selected_hierarchies</em> contains 251 graphs; this is because there are customers that fall within the same company hierarchy. The companies in the graphs in this list now also contain an extra logical attribute, <em>is_searched_company</em>, which indicates whether the company was in the <em>id_company</em> column. Let&#39;s take a look at one of the graphs that contain multiple customers. The customer &#39;vertices&#39; are colored orange here:</p>

<pre><code class="r">igraph::V(graph_example)$color &lt;- ifelse(igraph::V(graph_example)$is_searched_company,
                                                   col_graydon[2],
                                                   col_graydon[4])

plot_graydon_graph(graph_example,
                   vertex.label = &quot;&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-11"/></p>

<h2><a name="selecting_all"></a>Listing all hierarchy graphs</h2>

<p>For whatever reason, you might want to creating a list of all of the seperate company hierarchies out of the complete company hierarchy &#39;space&#39;. This will take some time, so take some coffee&hellip;.    </p>

<pre><code class="r">list_all_graphs &lt;- list_company_hierarchy_graphs(graph_company_hierarchies)
</code></pre>

<h1><a name="convert_graph"></a>Converting company hierarchy graphs to data-frames</h1>

<p>Having graphs is nice for creating beautiful plots and useful calculations, but for the data to be useful for further processing, getting data from the graph into a data-frame format is handy.</p>

<h2><a name="convert_single_graph"></a>Converting a single hierarchy graph</h2>

<p>To turn a graph into a data-frame youy can use the function <em>hierarchy_as_data_frame</em>. We created the graph <em>graph_company_hierarchy</em> by searching hierarchies by company IDs and set the colors to them being in the searched-for companies, this is reflected by the <em>graph_company_hierarchy</em> and <em>color</em> columns respectively.</p>

<pre><code class="r">df_single_hierarchy &lt;- hierarchy_as_data_frame(graph_company_hierarchy)
</code></pre>

<table><thead>
<tr>
<th align="left">name</th>
<th align="right">id_company_parent</th>
<th align="left">code_sbi</th>
<th align="right">size_company</th>
<th align="right">qty_employees</th>
<th align="left">is_searched_company</th>
<th align="left">color</th>
</tr>
</thead><tbody>
<tr>
<td align="left">1003667</td>
<td align="right">931238099</td>
<td align="left">7022</td>
<td align="right">2</td>
<td align="right">15</td>
<td align="left">FALSE</td>
<td align="left">#8BB0DE</td>
</tr>
<tr>
<td align="left">931238099</td>
<td align="right">933898487</td>
<td align="left">6420</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">#EB6E08</td>
</tr>
<tr>
<td align="left">933898487</td>
<td align="right">911277358</td>
<td align="left">7022</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">#8BB0DE</td>
</tr>
<tr>
<td align="left">936298138</td>
<td align="right">931238099</td>
<td align="left">7311</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">FALSE</td>
<td align="left">#8BB0DE</td>
</tr>
<tr>
<td align="left">911277358</td>
<td align="right">NA</td>
<td align="left">6420</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="left">#8BB0DE</td>
</tr>
</tbody></table>

<h2><a name="convert_list_graphs"></a>Converting a list of hierarchy graphs</h2>

<p>A list of graphs can also be converted into a data-frame using <em>hierarchy_list_as_data_frame</em>:</p>

<pre><code class="r">df_selected_hierarchies &lt;- hierarchy_list_as_data_frame(list_selected_hierarchies)
</code></pre>

<h1><a name="calculate"></a>Calculating properties</h1>

<h2><a name="propage_values"></a>Propagating values</h2>

<p>It might come in handy to cumulate values in the hierarchy bottom up; this is where the <em>aggregate_company_hierarchy_value</em> function comes in handy. In this example the companies will get a new attribute <em>qty_employees_cum</em> which will contain the sum of all the <em>qty_employees</em> of the companies that below the company within the hierarchy.</p>

<pre><code class="r">graph_company_hierarchy &lt;- 
  aggregate_hierarchy_value(graph = graph_company_hierarchy, 
                            name_attribute = &quot;qty_employees&quot;,
                            name_aggregate = &quot;qty_employees_cum&quot;,
                            FUN = sum, 
                            na.rm = TRUE)
</code></pre>

<p>The result can be found can be shown in a graph, where we can see the original values and the rolled up values.</p>

<pre><code class="r">igraph::V(graph_company_hierarchy)$label &lt;- paste0(&quot;# &quot;,
                                                   igraph::V(graph_company_hierarchy)$qty_employees,
                                                   &quot; -&gt; Cum # &quot;,
                                                   igraph::V(graph_company_hierarchy)$qty_employees_cum)

plot_graydon_graph(graph_company_hierarchy)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-17"/></p>

<h2><a name="adding_stats"></a>Adding graph statistics</h2>

<p>Some overall statistics about the hierarchy can be added to the individual companies by using the <em>add_company_hierarchy_stats</em> function. This function will add the following attributes</p>

<ul>
<li><em>is_tree</em> - A logical indicating whether the company hierarchy is a tree (which should always be the case).</li>
<li><em>qty_comapny_hierarchy</em> - The the number of companies in the hierarchy.</li>
<li><em>id_company_top</em> - The company ID of the highest company in the hierachy (ultimate mother).</li>
<li><em>distance_to_top</em> - The number of companies between the current company and the ultimate mother company</li>
<li><em>qty_child_companies</em> - The number of child companies.</li>
<li><em>qty_sister_companies</em> - The number of sibling companies.</li>
</ul>

<pre><code class="r">graph_company_hierarchy &lt;- add_company_hierarchy_stats(graph_company_hierarchy)
</code></pre>

<p>Let&#39;s look at the statistics:</p>

<pre><code class="r">df_single_hierarchy &lt;- hierarchy_as_data_frame(graph_company_hierarchy)
</code></pre>

<table><thead>
<tr>
<th align="left">name</th>
<th align="right">id_company_parent</th>
<th align="left">code_sbi</th>
<th align="right">size_company</th>
<th align="right">qty_employees</th>
<th align="left">is_searched_company</th>
<th align="right">qty_employees_cum</th>
<th align="left">is_tree</th>
<th align="right">qty_comapny_hierarchy</th>
<th align="left">id_company_top</th>
<th align="right">distance_to_top</th>
<th align="right">qty_child_companies</th>
<th align="right">qty_sister_companies</th>
</tr>
</thead><tbody>
<tr>
<td align="left">1003667</td>
<td align="right">931238099</td>
<td align="left">7022</td>
<td align="right">2</td>
<td align="right">15</td>
<td align="left">FALSE</td>
<td align="right">15</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="left">911277358</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr>
<td align="left">931238099</td>
<td align="right">933898487</td>
<td align="left">6420</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="right">17</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="left">911277358</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr>
<td align="left">933898487</td>
<td align="right">911277358</td>
<td align="left">7022</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="right">17</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="left">911277358</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr>
<td align="left">936298138</td>
<td align="right">931238099</td>
<td align="left">7311</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="left">911277358</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr>
<td align="left">911277358</td>
<td align="right">NA</td>
<td align="left">6420</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">18</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="left">911277358</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody></table>

<h2><a name="marking"></a>Marking companies</h2>

<p>You can mark companies within a graphthat meet certain categorical  criteria with the function <em>mark_companies_logical</em>. This can be useful for derivations or coloring graphs. As a somewhat travial  example, let&#39;s mark the companies that have SBI codes (from <em>code_sbi</em>) that are a associated with holdings (that are in the vector <em>vec_sbi_holdings</em>). The new company attribute name will be <em>is_holding</em>.</p>

<pre><code class="r">vec_sbi_holdings &lt;- c(&quot;64&quot;, &quot;642&quot;, &quot;6420&quot;)

graph_company_hierarchy &lt;- mark_companies_logical(graph_company_hierarchy,
                                                  name_logical = &quot;is_holding&quot;,
                                                  name_filter = &quot;code_sbi&quot;,
                                                  set_criteria = vec_sbi_holdings)
</code></pre>

<h2><a name="sister_companies"></a>Sister companies</h2>

<p>You can get the siblings IDs of a company using the function <em>get_sibling_ids</em>, which in turn can be used to mark companies and plot them.</p>

<pre><code class="r">id_siblings &lt;- get_sibling_ids(graph_company_hierarchy, &quot;1003667&quot;)

graph_company_hierarchy &lt;- mark_companies_logical(graph_company_hierarchy,
                                                  name_logical = &quot;is_sibling&quot;, 
                                                  name_filter = &quot;id_company&quot;,
                                                  set_criteria = id_siblings
                                                  )

igraph::V(graph_company_hierarchy)$label &lt;- igraph::V(graph_company_hierarchy)$name
V(graph_company_hierarchy)$color &lt;- ifelse(V(graph_company_hierarchy)$is_sibling,
                                                   col_graydon[2],
                                                   col_graydon[4])

plot_graydon_graph(graph_company_hierarchy)
</code></pre>

<p><img src="data:image/png;base64,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0oDHvfGAFw140YAXLQl43JsPeNGAFw140VKAx91DwIsGvGjAi5YAPO4+Al404EWzD4+7l4AXDXjRgBfNPDzufgJeNOBFA1406/C4ewp40YAXDXjRjMPj7ivgRQNeNNvwuHsLeNGAFw140UzD4+4v4EUDXjTgRbMMj7vHgBcNeNEMw+PuM+BFA1404EWzC4+714AXDXjRgBfNLDzufgNeNOBFA140q/C4ew540YAXzSg87r4DXjTgRQNeNJvwuHsPeNGAFw140UzC4+4/4EUDXjTgRbMIj3uATMEPu64h8CEyBF+iu9wfsZ+JQmbga/U66P0XH360+kyvGF04cWs43Hj3dfdf5oYL5edWswX35Xvr47tUH1JDxYdf621fW//TrY2/fbzxc4f/4a2Nv95/dOv2tfXNBYe+mb2w7u5S3io/jP1k21N8+Ae90QeXh8PPvjX89JvuYHfH/S8+dvqv9j+57n4iilp765Wi/pAaKj781svZc5eHj7KvDB99Z/jh/fKYH372jexLffeF0/VLffHY3ao/pIaKD18U298ev8C/XqL/uzzqhxu/7K71iof9Cr58UejXH1JDxYcfrboD/tPMHfEbPysP+yw7cWvj3RP3u7tH/GbGEd908eHdO7nh1HhP5zPgRQNeNOBFA1404EWzAD9dHnevAS+aCfhp8rj7DXjRbMA/KY+754zA75fH3XdW4Ln0KnBm4LnYMmyG4CeXV1OATMFTuIAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBcNeNGAFw140YAXDXjRgBft/8TNJyb7lo0CAAAAAElFTkSuQmCC" alt="plot of chunk unnamed-chunk-22"/></p>

<p>Remember the table of customers? If we want to get all siblings of those companies we can use the function <em>get_siblings_df</em>.</p>

<pre><code class="r">tbl_siblings &lt;- get_siblings_df(graph_company_hierarchies, tbl_customers$id_company)
</code></pre>

<p>Below you can see a sample of the resulting data-frame, where you can see the company with it&#39;s siblings and the <em>qty_siblings</em> indicating the total number of siblings the company of <em>id_company</em> has.</p>

<table><thead>
<tr>
<th align="left">id_company</th>
<th align="left">id_sibling</th>
<th align="right">qty_siblings</th>
</tr>
</thead><tbody>
<tr>
<td align="left">894618067</td>
<td align="left">80248</td>
<td align="right">21</td>
</tr>
<tr>
<td align="left">894618067</td>
<td align="left">235051</td>
<td align="right">21</td>
</tr>
<tr>
<td align="left">894618067</td>
<td align="left">255912</td>
<td align="right">21</td>
</tr>
<tr>
<td align="left">894618067</td>
<td align="left">343927</td>
<td align="right">21</td>
</tr>
<tr>
<td align="left">894618067</td>
<td align="left">688639</td>
<td align="right">21</td>
</tr>
<tr>
<td align="left">894618067</td>
<td align="left">714089</td>
<td align="right">21</td>
</tr>
</tbody></table>

<h2><a name="recode_holdings"></a>Recoding holdings</h2>

<p>When dealing with customers you&#39;ll ofen encounter them having economic activity codes that mark them as financial holdings. This is often the case because this is the company you send the bills too. But this is not really informative when analysing the type of companies you have as customers. In this case you might want to recode them to better reflect what kind of business they are really in.</p>

<p>Here you see an example of a company hierarchy with some holdings, which are colored orange here:</p>

<pre><code class="r">vec_sbi_holdings &lt;- c(&quot;64&quot;, &quot;642&quot;, &quot;6420&quot;)

graph_company_hierarchy &lt;- mark_companies_logical(graph_company_hierarchy,
                                                  name_logical = &quot;is_holding&quot;,
                                                  name_filter = &quot;code_sbi&quot;,
                                                  set_criteria = vec_sbi_holdings)

igraph::V(graph_company_hierarchy)$label &lt;- igraph::V(graph_company_hierarchy)$code_sbi
V(graph_company_hierarchy)$color &lt;- ifelse(V(graph_company_hierarchy)$is_holding,
                                                   col_graydon[2],
                                                   col_graydon[4])

plot_graydon_graph(graph_company_hierarchy)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-25"/></p>

<p>You can use the function <em>recode_holding_codes</em> to recode the holdings so they reflect the economic activity codes of the majority of the children:</p>

<pre><code class="r">graph_company_hierarchy &lt;- recode_holding_codes(graph_company_hierarchy, 
                                                name_activity_code = &quot;code_sbi&quot;, 
                                                vec_holding_codes = c(&quot;64&quot;, &quot;642&quot;, &quot;6420&quot;))
</code></pre>

<p>This would result in this recoded company hierarchy:
<img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-27"/></p>

</body>

</html>
